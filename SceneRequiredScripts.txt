Scene Required Scripts
======================

Last updated: UnitBrain transition lifecycle now supports hierarchical parent-state entry/exit

FSM runtime scripts (required):
- Assets/FSM/UnitBrain.cs
  - `EmitEvent` evaluates state handlers first, then transition assets when events are not consumed.
  - Transition execution now uses ancestry chains + lowest common ancestor (LCA) to invoke `OnExit`/`OnEnter` across parent states.
  - `OnExit` runs from old leaf upward (excluding LCA), then `OnEnter` runs from below LCA down to new leaf.
- Assets/FSM/BehaviourTransition.cs
  - Defines transition conditions with `From`, `EventName`, and `To`.

FSM leaf states required for worker loop transitions:
- Assets/FSM/States/LeafStates/MoveToResourceState.cs
  - Does not consume `Arrived`; allows `MoveToResource -> Gathering` transition.
- Assets/FSM/States/LeafStates/GatheringState.cs
  - Does not consume `WorkComplete`; allows `Gathering -> MoveToDropoff` transition.
- Assets/FSM/States/LeafStates/MoveToDropoffState.cs
  - Does not consume `Arrived`; allows `MoveToDropoff -> Delivering` transition.
- Assets/FSM/States/LeafStates/DeliveringState.cs
  - Does not consume `DeliveryComplete`; allows `Delivering -> Idle` transition.

FSM transition assets expected in scene wiring:
- Assets/FSM/Transitions/Idle_to_MoveToResource.asset (`OnOrderGather`)
- Assets/FSM/Transitions/MoveToResource_to_Gathering.asset (`Arrived`)
- Assets/FSM/Transitions/Gathering_to_MoveToDropoff.asset (`WorkComplete`)
- Assets/FSM/Transitions/MoveToDropoff_to_Delivering.asset (`Arrived`)
- Assets/FSM/Transitions/Delivering_to_Idle.asset (`DeliveryComplete`)
