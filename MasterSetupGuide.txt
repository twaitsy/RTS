Master Setup Guide
==================

Last updated: FSM transition-driving leaf events now bubble to UnitBrain transitions

FSM event flow semantics (authoritative):
- `UnitBrain.EmitEvent(evt)` first offers events to current state and parent chain via `HandleEvent`.
- A state only blocks transition evaluation when it returns `true` from `HandleEvent`.
- Transition-driving events in worker leaf states are intentionally not consumed internally.
- Worker leaf states (`MoveToResourceState`, `GatheringState`, `MoveToDropoffState`, `DeliveringState`) now return `false` for `Arrived`, `WorkComplete`, and `DeliveryComplete` so transition assets can execute.

Verified worker transition chain:
- `Idle -> MoveToResource` on `OnOrderGather`
- `MoveToResource -> Gathering` on `Arrived`
- `Gathering -> MoveToDropoff` on `WorkComplete`
- `MoveToDropoff -> Delivering` on `Arrived`
- `Delivering -> Idle` on `DeliveryComplete`

Legacy validation architecture notes:
- Unity menu: `Tools/Validation/Validate All Definitions`
- Runtime bootstrap, editor menu validation, and CI use the same validation orchestration core.
- CI execute method: `DefinitionValidationMenu.ValidateAllForCI`.
