Master Setup Guide
==================

Last updated: Task step result API renamed to explicit runner actions (StayOnStep/AdvanceStep/Jump/FailTask)

Task runner flow semantics (authoritative):
- `TaskStepResult` uses explicit action/result constructors:
  - `StayOnStep()`: keep executing the current step on the next tick.
  - `AdvanceStep()`: move to the next step index.
  - `Jump(index)`: jump to an explicit step index.
  - `FailTask()`: end the whole task immediately.
- `TaskRunner.Tick()` switches on explicit `TaskStepResult.Flow` values (`StayOnStep`, `AdvanceStep`, `JumpToStep`, `FailTask`).
- `TaskRunner` validates current and jump step indices and terminates safely on invalid values.

Task step behavior mapping:
- `QueryStep`
  - Advances when a target is found and stored.
  - Fails task when no target exists.
- `MoveToStep`
  - Stays while actor is moving toward target.
  - Advances once actor is within arrival threshold.
  - Fails task for invalid context/actor/target wiring.
- `WorkStep`
  - Stays while work timer remains above zero.
  - Advances after work completion and inventory increment.
- `DeliverStep`
  - Stays while actor is moving into drop-off range.
  - Advances only after in-range transfer is performed.
  - Fails task when drop-off cannot be found or context is invalid.
- `LoopStep`
  - Uses explicit jump semantics via `Jump(0)`.

Legacy validation architecture notes:
- Unity menu: `Tools/Validation/Validate All Definitions`
- Runtime bootstrap, editor menu validation, and CI use the same validation orchestration core.
- CI execute method: `DefinitionValidationMenu.ValidateAllForCI`.
